{% import '_bin/_form.html' as frm %}
{% set table = 'indirizzi' %}
<script>
    function salvaIndirizzo( t ) {
					$( "#form-indirizzi" ).submit();
	   // window.open( '/print/indirizzario.csv?__categoria__='+data, '_self');
    }
</script>
<div class="modal" tabindex="-1" role="dialog" id="modal-inserimento-indirizzi">
	<div class="modal-dialog" role="document">
	<div class="modal-content">
		<div class="modal-header">
		<h5 class="modal-title">inserisci un nuovo indirizzo</h5>
		<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
		</div>
		<div class="modal-body">
		<div class="container-fluid">
			<form id="form-{{ table }}" class="form-main d-flex flex-column flex-fill" action="" method="post" autocomplete="off">

				{# CAMPI HIDDEN DI BASE #}
				<input type="hidden" id="id" name="{{ table }}[id]" value="{{ request[ table ].id }}">
				<input type="hidden" id="method" name="{{ table }}[__method__]" value="{{ method }}">
				<input type="hidden" id="reset" name="{{ table }}[__reset__]" value="">
				<input type="hidden" id="timestamp" name="{{ table }}[timestamp_inserimento]" value="{{ 'now'|date('U') }}">
				<input type="hidden" id="account" name="{{ table }}[id_account_inserimento]" value="{{ account }}">
				{% if request.__backurl__ %}{# TODO VEDERE SE FUNZIONA ANCHE COSÌ FUORI DALL'IF #}{% endif %}
		
			<div class="form-group form-row">
				<div class="col-auto">
				<span class="label-top">tipo</span>
				{{ frm.select( 'indirizzi', '', '', 'id_tipologia', '', etc.select.tipologie_indirizzi, request ) }}
				</div>
				<div class="col">
				<span class="label-top ">indirizzo</span>
					{{ frm.inputRequired(  'indirizzi', '', '', 'indirizzo', '', '', request ) }}
				</div>
			</div>
			<div class="form-group form-row">
				<div class="col-2 col-md-2">
					<span class="label-top ">civico</span>
					{{ frm.input(  'indirizzi', '', '', 'civico', '', '', request ) }}
				</div>

				<div class="col-3 col-md-3">
				<span class="label-top">cap</span>
				{{ frm.input(  'indirizzi', '', '', 'cap', '', '', request ) }}
				</div>
				<div class="col">
					<span class="label-top ">località</span>
					{{ frm.input(  'indirizzi',  '', '', 'localita', '', '', request ) }}
				</div>
			</div>
			<div class="form-group form-row">

				<div class="col-12 col-md">
				<span class="label-top ">comune</span>
					{{ frm.selectBox(  'indirizzi', '', '', 'id_comune', 'comune', etc.select.comuni, request, '', '', 1 ) }}
				</div>
			</div>
	
		</div>
		</div>
		<div class="modal-footer">
		<button type="button" class="btn btn-secondary btn-sm" id="duplica-btn" onclick="salvaIndirizzo(this);" >salva</button>
		<button type="button" class="btn btn-secondary btn-sm" data-dismiss="modal">annulla</button>
		</div>
	</div>
	</div>
</div>